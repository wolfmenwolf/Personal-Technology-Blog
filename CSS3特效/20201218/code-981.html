<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>超好看的照片墙 - 素材牛（www.sucainiu.com）</title>
<script id="jqbb" src="http://libs.baidu.com/jquery/1.11.3/jquery.min.js"></script>
<style type="text/css">
body { background-color: #fff }
#img {
	width:503px;
	height:252px;
	margin:50px auto;
	perspective:700px;
	-webkit-perspective:700px;
}
#img img {
	width:50px;
	height:50px;
	float:left;
}
#btn {
	width:100px;
	height:40px;
	line-height:40px;
	text-align:center;
	font-size:16px;
	color:#000;
	background:#0fc;
	border-radius:5px;
	margin:0 auto;
	padding:5px 5px;
	cursor:pointer;
}
</style>
</head>

<body>
<div id="img">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-1.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-2.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-3.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-4.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-5.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-6.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-7.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-8.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-9.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-3.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-1.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-2.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-3.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-4.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-5.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-6.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-7.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-8.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-9.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-3.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-1.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-2.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-3.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-4.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-5.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-6.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-7.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-8.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-9.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-3.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-1.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-2.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-3.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-4.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-5.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-6.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-7.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-8.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-9.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-3.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-1.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-2.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-3.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-4.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-5.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-6.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-7.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-8.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-9.png" alt="">
    <img src="http://www.sucainiu.com/themes/images/demo/500x300-3.png" alt="">
</div>
<div id="btn">点击查看效果</div>

<script>
/*
        1.闪的效果（瞬间高度宽度变为0，scale,随机）
        2.图片由小变大，同时透明度由1-0
        3.图片旋转，同时透明度由0-1
    */
window.onload = function() {
    var btn = document.getElementById('btn');
    var imgs = document.getElementsByTagName("img");
    var on = true;

    btn.onclick = function() {
        if (!on) {
            return;
        }
        on = false;
        var endNum = 0; //运动完成的图片数量
        for (var i = 0; i < imgs.length; i++) {
            (function(i) {
                setTimeout(function() {
                    montion(imgs[i], '1s', function() {
                        this.style.transform = 'scale(0)';
                    }, function() {
                        montion(this, "1s", function() {
                            this.style.transform = 'scale(1)';
                            this.style.opacity = '0';
                        }, function() {
                            endNum++;
                            if (endNum == imgs.length) {
                                toBig();
                            }
                        })
                    })
                }, Math.random() * 1000);
            })(i)
        }


    };

    //第三个效果
    function toBig() {
        /*
            坐标轴（X，Y,z）
        */
        var allEnd = 0;
        for (var i = 0; i < imgs.length; i++) {
            imgs[i].style.transition = "";
            imgs[i].style.transform = 'rotateY(0deg) translateZ(-' + Math.random() * 500 + 'px)';
            (function(i) {
                setTimeout(function() {
                    montion(imgs[i], '2s', function() {
                        this.style.opacity = 1;
                        this.style.transform = 'rotateY(-360deg) translateZ(0)';
                    }, function() {
                        allEnd++;
                        if (allEnd == imgs.length) {
                            on = true;
                        }
                    });
                }, Math.random() * 1000);
            })(i)
        }
    }

    //运动函数（运动的对象，时间，属性函数，回调）
    function montion(obj, time, doFn, callBack) {
        obj.style.transition = time;
        doFn.call(obj); //调用函数，并把this的指向给obj
        var called = false
        obj.addEventListener('transitionend', function() {
            if (!called) {
                callBack && callBack.call(obj);
                called = true;
            }
        }, false);
    }
}
</script>
<script type="text/javascript" async src="//idm-su.baidu.com/su.js"></script>
</body>
</html>